{{ define "main" }}

  <!-- Main intro content -->
  {{ $textColor := $.Param "text_color" | default "mid-gray" }}
  <article class="cf ph3 ph4-ns pv3 pv4-ns f6 f5-ns tc center measure lh-copy {{ $textColor }}">

    {{ .Content }}
  </article>


    {{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
    {{ $mainSections := .Site.Params.mainSections | default (slice "post") }}
    
    {{/* Check to see if the section is defined for ranging through it */}}
 
  
  
  <!-- 3D Research Slider (now using content/en/home/*.md) -->
  <section class="flex flex-column justify-center items-center mt6 mb6 ph3">
    {{ $homePages := where site.RegularPages "Section" "research" }}
    {{ $sortedPages := sort $homePages "Params.priority" }}
    <div id="slider" class="slider" style='--quantity: {{ len $sortedPages }}'>
      {{ range $index, $item := $sortedPages }}
        <div class="item" style="--position: {{ add $index 1 }}">
          <div class="research-card">
            <div class="image-wrapper">
              <img src="{{ $item.Params.image }}" alt="{{ $item.Title }}">
            </div>
            <div class="text-wrapper">
              <h3>{{ $item.Title }}</h3>
              <p>{{ $item.Params.description }}</p>
            </div>
          </div>
        </div>
      {{ end }}
    </div>
  </section>



<!-- 
    Why We Do It: Scroll-Reveal Quote
    <section class="w-100 pv6 scroll-reveal-quote relative" id="why-we-do-it" style="position: relative; height: 10rem; margin-bottom: 16rem;">
      <div class="tc f3 f2-ns fw6 i mid-gray ph3 ph5-l measure center">
        <span class="quote-question">Why we do it?</span>
        <span class="quote-answer">â€œTo understand the brain is to understand ourselves.â€</span>
      </div>
    </section>



    Mini Highlights Section
    <section class="w-100 pv4 bg-light-silver">
        <div class="flex flex-column flex-row-ns justify-around items-center tc f5 f4-ns fw5 mid-gray ph3 ph5-l measure-wide center">

            Research Topics
            <div class="pa3">
                <span role="img" aria-label="projects">ğŸ§ª</span>
                {{ len (where .Site.RegularPages "Section" "research") }} Research Topics
            </div>

            Team Members
            <div class="pa3">
                <span role="img" aria-label="team">ğŸ‘©â€ğŸ”¬</span>
                {{ $membersDir := readDir "content/en/people/members" }}
                {{ $externalDir := readDir "content/en/people/external_members" }}
                {{ $memberCount := len $membersDir }}
                {{ $externalCount := len $externalDir }}
                {{ add $memberCount $externalCount }} Team Members
            </div>

            Publications
            <div class="pa3">
                <span role="img" aria-label="papers">ğŸ“„</span>
                {{ len (where .Site.RegularPages "Section" "publications") }} Publications
            </div>

        </div>
    </section>
  -->


  {{/* All publications */}}
  {{ $publications := where .Site.RegularPages "Section" "publications" }}
  {{ $pub_count := len $publications }}

  {{ if ge $pub_count 1 }}
    <div class="pa3 pa4-ns w-100 w-70-ns center">

      <!-- Timeline Heading -->
      <h1 class="tc f5 f3-ns fw6 dark-gray mb2 mt4">Timeline</h1>

      <!-- Timeline Layout (rendered only once) -->
      {{ .Render "splash-summary-timeline"}}

      <!-- All Publications Button -->
      {{ with $.Site.GetPage "section" "publications" }}
        <a href="{{ .RelPermalink }}" class="link db f6 pa2 br3 bg-mid-gray white dim center tc" style="width: fit-content; max-width: 90%;">
          {{ i18n "allTitle" . }}
        </a>
      {{ end }}

    </div>
  {{ end }}

{{ end }}
    
