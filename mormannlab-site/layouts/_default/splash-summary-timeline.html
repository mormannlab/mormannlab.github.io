<section class="timeline-container">
  <div class="timeline-line"></div>
  {{ $pubs := where .Site.RegularPages "Section" "publications" }}
  {{ $grouped := $pubs.GroupByDate "2006" "desc" }}
  {{ range $index, $yearGroup := $grouped }}
    {{ $stepClass := printf "step-%d" (add $index 1) }}
    <div class="timeline-row {{ if modBool $index 2 }}reverse{{ end }} {{ $stepClass }}">
      
      <!-- Year hexagon with connector -->
      <div class="timeline-col year">
        <div class="hexagon {{ $stepClass }}"><span>{{ $yearGroup.Key }}</span></div>

        <!-- Connector: o-------O-------o -->
        <div class="connector">
          <div class="line-dot left"></div>
          <div class="center-dot"></div>
          <div class="line-dot right"></div>
        </div>
      </div>

      <!-- Publication list -->
      <div class="timeline-col content">
        <div class="timeline-box">
          <ul>
            {{ range $paper := $yearGroup.Pages }}
              <li>{{ $paper.Title }}</li>
            {{ end }}
          </ul>
        </div>
      </div>

    </div>
  {{ end }}
</section>
