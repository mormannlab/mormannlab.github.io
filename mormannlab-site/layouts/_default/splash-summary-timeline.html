<div class="timeline-wrapper">
  <section class="timeline-container">
    <div class="timeline-line"></div>
    {{ $pubs := where .Site.RegularPages "Section" "publications" }}
    {{ $grouped := $pubs.GroupByDate "2006" "desc" }}
    {{ range $index, $yearGroup := $grouped }}
      {{ $stepClass := printf "step-%d" (add $index 1) }}
      <div class="timeline-row {{ if modBool $index 2 }}reverse{{ end }} {{ $stepClass }}">
        
        <!-- Year hexagon with connector -->
        <div class="timeline-col year">
          <div class="hexagon {{ $stepClass }}"><span>{{ $yearGroup.Key }}</span></div>

          <!-- Connector: o-------O-------o -->
          <div class="connector">
            <div class="line-dot left"></div>
            <div class="center-dot"></div>
            <div class="line-dot right"></div>
          </div>
        </div>

        <!-- Content Box -->
        <div class="timeline-col content">
          <div class="timeline-box">
            
            <!-- Paper count -->
            <p><strong>{{ len $yearGroup.Pages }}</strong> Papers.</p>
            
            <!-- Hidden list only for JS to extract dates -->
            <ul style="display: none;">
              {{ range $paper := $yearGroup.Pages }}
                <li data-date="{{ $paper.Date }}"></li>
              {{ end }}
            </ul>
            
            <!-- Calendar Heatmap (per year) -->
            <div class="calendar-heatmap" id="calendar-heatmap-{{ $yearGroup.Key }}">
              <div class="months-row" id="months-{{ $yearGroup.Key }}"></div>
              <div class="days-grid" id="days-{{ $yearGroup.Key }}"></div>
            </div>

          </div>
        </div>
      </div>
    {{ end }}
  </section>
</div>


{{ $js := resources.Get "ananke/js/timeline-dynamic-gradient-entries.js" | resources.Minify | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>

{{ $js := resources.Get "ananke/js/timeline-heatmap.js" | resources.Minify | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>

