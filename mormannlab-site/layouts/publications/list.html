{{ define "main" }}
<article class="pa3 pa4-ns nested-copy-line-height">
  <!-- Introductory Text as Normal Text -->
  <section class="intro-text cf pv3 pv4-l f4 tj lh-copy" style="max-width: 80%; margin: 0 auto;">
    {{ .Content }}
  </section>

  <!-- Group Publications by Year -->
  <aside class="flex flex-column mt5" style="max-width: 80%; margin: 0 auto;">
    {{ $publications := .Pages.GroupByDate "2006" }} <!-- Group by Year -->
    {{ range $publications }}
      <div class="w-100 mb5">
        <!-- Year Header with Toggle Class -->
        <h2 class="f3 fw6 bb b--light-gray pb2 mb4 year-toggle" data-year="{{ .Key }}">
          {{ .Key }}
        </h2>
        
        <!-- Publication List (Initially Hidden on Mobile Only) -->
        <div class="publication-list">
          <div class="flex flex-column gap3">
            {{ range .Pages }}
              {{ .Render "summary" }}
            {{ end }}
          </div>
        </div>
      </div>
    {{ end }}
  </aside>
</article>

<!-- Hugo's Resource Pipeline for JavaScript -->
{{ $js := resources.Get "ananke/js/publication-year-toggle.js" | resources.Minify | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" defer></script>

{{ end }}

